<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution Makers - Royal Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f59e0b; --bg: #020617; --card: rgba(30, 41, 59, 0.5); }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; transition: 0.5s; overflow: hidden; height: 100vh; }
        .glass { background: var(--card); backdrop-filter: blur(15px); border: 1px solid rgba(245, 158, 11, 0.1); }
        .page { position: absolute; inset: 0; padding: 20px; display: none; flex-direction: column; animation: slide 0.4s ease-out; overflow-y: auto; padding-bottom: 120px; }
        .active-page { display: flex; }
        @keyframes slide { from { opacity: 0; transform: translateX(50px); } to { opacity: 1; transform: translateX(0); } }
        .nav-btn { opacity: 0.4; transition: 0.3s; }
        .nav-active { opacity: 1; color: var(--gold); transform: scale(1.2); filter: drop-shadow(0 0 10px var(--gold)); }
        #board { background: #ffffff; border-radius: 20px; touch-action: none; cursor: crosshair; }
        .toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); transition: 0.5s; z-index: 9999; }
        .toast.show { top: 20px; }
        /* Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª */
        body.royal-theme { --bg: #1a1a1a; --gold: #fbbf24; }
        body.emerald-theme { --bg: #062017; --gold: #10b981; }
    </style>
</head>
<body>
    <div id="toast" class="toast glass px-8 py-4 rounded-full border-gold shadow-2xl">âœ¨ <span id="msg"></span></div>
    <div id="p-login" class="page active-page items-center justify-center">
        <div class="w-24 h-24 bg-gradient-to-t from-yellow-700 to-yellow-400 rounded-full flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(245,158,11,0.5)] text-4xl animate-pulse">ğŸ‘‘</div>
        <h1 class="text-3xl font-black mb-2 font-['Orbitron'] text-yellow-500 uppercase tracking-widest">Solution Makers</h1>
        <p class="text-slate-500 mb-8 text-xs font-bold">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†</p>
        <input id="u-name" type="text" class="w-full max-w-xs bg-white/5 border border-yellow-500/20 p-5 rounded-2xl text-center outline-none focus:border-yellow-500 transition-all text-lg mb-4" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±">
        <button onclick="login()" class="w-full max-w-xs bg-yellow-600 hover:bg-yellow-500 py-5 rounded-2xl font-black text-black shadow-xl transition-all">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>

    <div id="p-home" class="page">
        <header class="flex justify-between items-center mb-8">
            <div class="flex items-center gap-3">
                <div id="av" class="w-12 h-12 rounded-full bg-yellow-600 flex items-center justify-center font-bold text-black border-2 border-white/20"></div>
                <p id="nb" class="font-black text-lg text-yellow-500"></p>
            </div>
            <div class="glass px-4 py-2 rounded-full text-yellow-400 font-black">â­ <span id="xp">0</span></div>
        </header>

        <div class="glass p-8 rounded-[40px] text-center mb-6 border-yellow-500/20 shadow-inner">
            <div id="timer" class="text-7xl font-['Orbitron'] font-black mb-6 text-white">25:00</div>
            <div class="flex justify-center gap-4 mb-6">
                <button onclick="setTime(1500)" class="text-[10px] glass px-3 py-1 rounded-full border-white/10">25 Ø¯</button>
                <button onclick="setTime(600)" class="text-[10px] glass px-3 py-1 rounded-full border-white/10">10 Ø¯</button>
                <button onclick="setTime(300)" class="text-[10px] glass px-3 py-1 rounded-full border-white/10">5 Ø¯</button>
            </div>
            <button id="t-btn" onclick="runTimer()" class="w-full bg-yellow-600 text-black py-4 rounded-3xl font-black uppercase shadow-xl hover:scale-95 transition">Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
        </div>

        <div class="space-y-4">
            <h3 class="font-bold text-xs opacity-50 px-2 uppercase">Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù†Ø´Ø·Ø©</h3>
            <div class="glass p-3 rounded-2xl flex gap-2 border-white/5">
                <input id="ti" type="text" class="bg-transparent flex-grow px-3 outline-none text-sm" placeholder="Ù…Ø§Ø°Ø§ Ø³Ù†Ù†Ø¬Ø² Ø§Ù„Ø¢Ù†ØŸ">
                <button onclick="addTask()" class="bg-yellow-600 text-black w-12 h-12 rounded-xl font-bold">+</button>
            </div>
            <div id="tl" class="space-y-3"></div>
        </div>
    </div>
    <div id="p-board" class="page">
        <h2 class="text-2xl font-black mb-4 text-yellow-500">Ù…Ù†ØµØ© Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠØ© ğŸ–‹ï¸</h2>
        <div class="relative bg-white rounded-2xl p-1 mb-4 shadow-[0_0_30px_rgba(255,255,255,0.1)]">
            <canvas id="board" class="w-full h-[400px]"></canvas>
        </div>
        <div class="flex flex-wrap gap-2 justify-center bg-black/40 p-4 rounded-3xl">
            <button onclick="setTool('pen')" class="glass p-3 rounded-xl border-yellow-500/20">ğŸ–Œï¸</button>
            <button onclick="setTool('eraser')" class="glass p-3 rounded-xl border-yellow-500/20">ğŸ§¼</button>
            <input type="color" id="color" onchange="col=this.value" class="w-10 h-10 bg-transparent border-none">
            <select onchange="ctx.lineWidth=this.value" class="bg-transparent text-xs glass p-2 rounded-xl outline-none">
                <option value="2">Ø±ÙÙŠØ¹</option><option value="5" selected>Ù…ØªÙˆØ³Ø·</option><option value="15">Ø¹Ø±ÙŠØ¶</option>
            </select>
            <button onclick="clearBoard()" class="text-[10px] font-bold text-red-400 px-4">Ù…Ø³Ø­</button>
            <button onclick="saveBoard()" class="bg-yellow-600 text-black px-6 py-2 rounded-xl text-xs font-black">Ø­ÙØ¸ ÙƒØµÙˆØ±Ø©</button>
        </div>
    </div>

    <div id="p-shop" class="page">
        <h2 class="text-2xl font-black mb-8 text-yellow-500 text-center">Ù…ØªØ¬Ø± Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ù…Ù„ÙƒÙŠØ© ğŸ</h2>
        <div class="space-y-4">
            <div class="glass p-6 rounded-[35px] flex justify-between items-center border-emerald-500/30">
                <div><p class="font-bold">Ø«ÙŠÙ… Ø§Ù„Ø²Ù…Ø±Ø¯ ğŸ’š</p><p class="text-[10px] opacity-50">ØªØºÙŠÙŠØ± ÙƒØ§Ù…Ù„ Ù„Ù„ÙˆÙ† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ - 1000 Ù†Ù‚Ø·Ø©</p></div>
                <button onclick="buy(1000,'emerald')" class="bg-emerald-600 text-white px-5 py-2 rounded-xl text-xs font-bold">Ø´Ø±Ø§Ø¡</button>
            </div>
            <div class="glass p-6 rounded-[35px] flex justify-between items-center border-yellow-500/30">
                <div><p class="font-bold">Ø§Ù„Ù‚Ù„Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ ğŸ‘‘</p><p class="text-[10px] opacity-50">ÙŠÙØªØ­ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°Ù‡Ø¨ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¨ÙˆØ±Ø© - 500 Ù†Ù‚Ø·Ø©</p></div>
                <button onclick="buy(500,'gold-pen')" class="bg-yellow-600 text-black px-5 py-2 rounded-xl text-xs font-bold">Ø´Ø±Ø§Ø¡</button>
            </div>
        </div>
        <h2 class="text-2xl font-black mt-10 mb-6 text-indigo-400 text-center">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ğŸ“Š</h2>
        <div class="grid grid-cols-2 gap-4" id="achievements-list">
             <div class="glass p-4 rounded-3xl opacity-30" id="ach-1">ğŸ”° Ù…Ø¨ØªØ¯Ø¦</div>
             <div class="glass p-4 rounded-3xl opacity-30" id="ach-2">ğŸ”¥ Ù…Ø¬ØªÙ‡Ø¯</div>
        </div>
    </div>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] h-20 glass rounded-full flex justify-around items-center px-2 z-50 border-white/10 shadow-2xl">
        <button onclick="nav('home')" id="n-home" class="nav-btn nav-active text-2xl">ğŸ </button>
        <button onclick="nav('board')" id="n-board" class="nav-btn text-2xl">ğŸ¨</button>
        <button onclick="nav('shop')" id="n-shop" class="nav-btn text-2xl">ğŸ</button>
    </nav>
    <script>
        let xp = parseInt(localStorage.getItem('xp')) || 0;
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let t = null, sec = 1500, col = '#000000', tool = 'pen', canvas, ctx, drawing = false;

        function notify(m) {
            const t = document.getElementById('toast');
            document.getElementById('msg').innerText = m;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function save() {
            localStorage.setItem('xp', xp);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            document.getElementById('xp').innerText = xp;
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            if(xp >= 500) document.getElementById('ach-1').classList.remove('opacity-30');
            if(xp >= 2000) document.getElementById('ach-2').classList.remove('opacity-30');
        }

        function setTime(s) { sec = s; document.getElementById('timer').innerText = Math.floor(sec/60)+":00"; notify("ØªÙ… Ø¶Ø¨Ø· Ø§Ù„ÙˆÙ‚Øª!"); }

        function login() {
            const n = document.getElementById('u-name').value;
            if(!n) return notify("Ø§Ù„Ù‚Ø§Ø¯Ø© ÙŠØ­ØªØ§Ø¬ÙˆÙ† Ø§Ø³Ù…Ø§Ù‹!");
            localStorage.setItem('name', n);
            document.getElementById('nb').innerText = n;
            document.getElementById('av').innerText = n[0].toUpperCase();
            document.getElementById('p-login').classList.remove('active-page');
            nav('home'); save(); initBoard();
        }

        function nav(p) {
            document.querySelectorAll('.page').forEach(e => e.classList.remove('active-page'));
            document.getElementById('p-' + p).classList.add('active-page');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById('n-' + p).classList.add('nav-active');
        }

        function runTimer() {
            const b = document.getElementById('t-btn');
            if(t) { clearInterval(t); t = null; b.innerText = "Ø§Ø³ØªÙ…Ø±Ø§Ø±"; }
            else {
                b.innerText = "ØªÙˆÙ‚Ù";
                t = setInterval(() => {
                    sec--;
                    let m = Math.floor(sec/60), s = sec%60;
                    document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if(sec <= 0) {
                        clearInterval(t); confetti(); xp += 500; save();
                        notify("Ø¥Ù†Ø¬Ø§Ø² Ù…Ù„ÙƒÙŠ! +500 Ù†Ù‚Ø·Ø©"); sec = 1500; b.innerText = "Ø¨Ø¯Ø¡";
                    }
                }, 1000);
            }
        }

        function addTask() {
            const v = document.getElementById('ti').value;
            if(!v) return;
            tasks.push({id: Date.now(), text: v});
            document.getElementById('ti').value = "";
            renderTasks(); save();
        }

        function renderTasks() {
            const l = document.getElementById('tl'); l.innerHTML = "";
            tasks.forEach(t => {
                const i = document.createElement('div');
                i.className = "glass p-4 rounded-2xl flex justify-between items-center animate-bounce";
                i.innerHTML = `<span>${t.text}</span><button onclick="completeTask(${t.id})" class="bg-yellow-600 text-black px-4 py-2 rounded-xl text-xs font-bold font-['Cairo']">ØªÙ…</button>`;
                l.prepend(i);
            });
        }

        function completeTask(id) {
            confetti({ particleCount: 100, origin: {y: 0.8} });
            tasks = tasks.filter(t => t.id !== id);
            xp += 100; renderTasks(); save(); notify("ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø©! +100 Ù†Ù‚Ø·Ø©");
        }

        function buy(c, item) {
            if(xp >= c) {
                xp -= c; save(); confetti();
                if(item === 'emerald') document.body.className = 'emerald-theme';
                if(item === 'gold-pen') { col = '#f59e0b'; notify("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù‚Ù„Ù… Ø§Ù„Ø°Ù‡Ø¨ÙŠ!"); }
                notify("ØªÙ… Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªÙØ¹ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!");
            } else notify("Ù†Ù‚Ø§Ø·Ùƒ Ù„Ø§ ØªÙƒÙÙŠ!");
        }

        function initBoard() {
            canvas = document.getElementById('board');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = 400;
            ctx.lineCap = 'round'; ctx.lineWidth = 5;
            canvas.onpointerdown = (e) => { drawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); };
            canvas.onpointermove = (e) => {
                if(!drawing) return;
                ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : col;
                ctx.lineTo(e.offsetX, e.offsetY); ctx.stroke();
            };
            canvas.onpointerup = () => drawing = false;
        }

        function setTool(t) { tool = t; }
        function clearBoard() { ctx.clearRect(0,0,canvas.width,canvas.height); }
        function saveBoard() {
            const link = document.createElement('a');
            link.download = 'Solution-Makers-Board.png';
            link.href = canvas.toDataURL();
            link.click();
            notify("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ„Ø®ÙŠØµ ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ!");
        }

        window.onload = () => {
            if(localStorage.getItem('name')) {
                document.getElementById('u-name').value = localStorage.getItem('name');
                login();
            }
            renderTasks(); save();
        };
    </script>
</body>
</html>
