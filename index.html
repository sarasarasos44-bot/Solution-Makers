<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solution Makers - Ultimate Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6366f1; --bg: #020617; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; overflow: hidden; height: 100vh; }
        .glass { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(25px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .page { position: absolute; inset: 0; padding: 20px; display: none; flex-direction: column; animation: slideUp 0.5s ease-out forwards; overflow-y: auto; padding-bottom: 120px; }
        .active-page { display: flex; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .nav-btn { opacity: 0.3; transition: 0.3s; }
        .nav-active { opacity: 1; color: var(--p); transform: translateY(-5px); }
        #board { background: #0f172a; border-radius: 20px; touch-action: none; cursor: crosshair; border: 1px solid #1e293b; }
        .toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); transition: 0.5s; z-index: 9999; }
        .toast.show { top: 20px; }
    </style>
</head>
<body>

    <div id="toast" class="toast glass px-6 py-4 rounded-full text-sm font-bold shadow-2xl border-indigo-500/50">âœ¨ <span id="msg"></span></div>

    <div id="p-login" class="page active-page items-center justify-center text-center">
        <div class="w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center mb-6 shadow-[0_0_50px_rgba(79,70,229,0.4)] text-3xl">ğŸ‡´ğŸ‡²</div>
        <h1 class="text-3xl font-black mb-2 font-['Orbitron']">SOLUTION MAKERS</h1>
        <p class="text-slate-500 mb-8 text-sm italic">Ù…Ø³ØªÙ‚Ø¨Ù„ Ø¹Ù…Ø§Ù† Ø¨Ø£ÙŠØ¯ÙŠÙƒÙ…</p>
        <input id="u-name" type="text" class="w-full max-w-xs bg-white/5 border border-white/10 p-5 rounded-3xl text-center outline-none focus:border-indigo-500 text-lg" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…ØºØ§Ù…Ø±Ø©">
        <button onclick="login()" class="mt-6 w-full max-w-xs bg-indigo-600 py-5 rounded-3xl font-black text-lg shadow-xl active:scale-95 transition">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
    </div>

    <div id="p-home" class="page">
        <header class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-3">
                <div id="av" class="w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center font-bold shadow-lg"></div>
                <p id="nb" class="font-black text-lg text-indigo-400"></p>
            </div>
            <div class="glass px-4 py-2 rounded-2xl text-yellow-400 font-bold">ğŸ† <span id="xp">0</span></div>
        </header>
        <div class="glass p-8 rounded-[40px] text-center mb-6 relative overflow-hidden">
            <div id="timer" class="text-6xl font-['Orbitron'] font-black mb-6">25:00</div>
            <button id="t-btn" onclick="runTimer()" class="w-full bg-white text-black py-4 rounded-3xl font-black shadow-lg">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ±ÙƒÙŠØ²</button>
        </div>
        <div class="space-y-4">
            <h3 class="font-bold opacity-60 text-sm">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ…ÙŠØ²</h3>
            <div class="glass p-3 rounded-3xl flex gap-2">
                <input id="ti" type="text" class="bg-transparent flex-grow px-3 outline-none text-sm" placeholder="Ù…Ø§ Ù‡Ùˆ Ù‡Ø¯ÙÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…ØŸ">
                <button onclick="addTask()" class="bg-indigo-600 w-12 h-12 rounded-2xl font-bold">+</button>
            </div>
            <div id="tl" class="space-y-3"></div>
        </div>
    </div>

    <div id="p-board" class="page">
        <h2 class="text-2xl font-black mb-4 text-blue-400">Ø³Ø¨ÙˆØ±Ø© Ø§Ù„ØªÙ„Ø®ÙŠØµ ğŸ¨</h2>
        <canvas id="board" class="w-full h-[400px] mb-4 shadow-inner"></canvas>
        <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="setTool('pen')" class="glass p-3 rounded-2xl">âœï¸</button>
            <button onclick="setTool('eraser')" class="glass p-3 rounded-2xl">ğŸ§¼</button>
            <button onclick="clearBoard()" class="glass p-3 rounded-2xl text-xs font-bold">Ù…Ø³Ø­</button>
            <input type="color" id="color" onchange="col=this.value" class="w-10 h-10 rounded-xl bg-transparent border-none">
            <button onclick="saveBoard()" class="bg-green-600 px-6 py-3 rounded-2xl text-xs font-black shadow-lg">Ø­ÙØ¸ Ø§Ù„ØªÙ„Ø®ÙŠØµ</button>
        </div>
    </div>

    <div id="p-shop" class="page">
        <h2 class="text-2xl font-black mb-6">Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ ğŸ</h2>
        <div class="space-y-4">
            <div class="glass p-5 rounded-3xl flex justify-between items-center">
                <div><p class="font-bold">ÙˆØ³Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ø¯ ğŸ…</p><p class="text-[10px] opacity-50">1000 Ù†Ù‚Ø·Ø©</p></div>
                <button onclick="buy(1000,'ÙˆØ³Ø§Ù… Ø§Ù„Ù‚Ø§Ø¦Ø¯')" class="bg-indigo-600 px-4 py-2 rounded-xl text-xs font-bold">Ø´Ø±Ø§Ø¡</button>
            </div>
            <div class="glass p-5 rounded-3xl flex justify-between items-center">
                <div><p class="font-bold">Ø«ÙŠÙ… Ø§Ù„Ø°Ù‡Ø¨ âœ¨</p><p class="text-[10px] opacity-50">3000 Ù†Ù‚Ø·Ø©</p></div>
                <button onclick="buy(3000,'Ø«ÙŠÙ… Ø§Ù„Ø°Ù‡Ø¨')" class="bg-yellow-600 px-4 py-2 rounded-xl text-xs font-bold">Ø´Ø±Ø§Ø¡</button>
            </div>
        </div>
    </div>

    <div id="p-stat" class="page">
        <h2 class="text-2xl font-black mb-6">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ğŸ“Š</h2>
        <div class="grid grid-cols-2 gap-4">
            <div class="glass p-6 rounded-3xl text-center"><p class="text-xs opacity-50">Ø§Ù„Ù…Ù‡Ø§Ù…</p><div id="dc" class="text-2xl font-black">0</div></div>
            <div class="glass p-6 rounded-3xl text-center"><p class="text-xs opacity-50">Ø§Ù„Ù†Ù‚Ø§Ø·</p><div id="xps" class="text-2xl font-black">0</div></div>
        </div>
        <div class="glass p-6 rounded-3xl mt-6">
            <p class="text-xs mb-4 opacity-70">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø¯Ù…</p>
            <div class="h-4 bg-white/5 rounded-full overflow-hidden">
                <div id="bar" class="h-full bg-indigo-500 w-0 transition-all duration-1000"></div>
            </div>
        </div>
    </div>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] h-20 glass rounded-[35px] flex justify-around items-center px-2 z-50">
        <button onclick="nav('home')" id="n-home" class="nav-btn nav-active text-2xl">ğŸ </button>
        <button onclick="nav('board')" id="n-board" class="nav-btn text-2xl">ğŸ¨</button>
        <button onclick="nav('stat')" id="n-stat" class="nav-btn text-2xl">ğŸ“Š</button>
        <button onclick="nav('shop')" id="n-shop" class="nav-btn text-2xl">ğŸ</button>
    </nav>

    <script>
        let xp = parseInt(localStorage.getItem('xp')) || 0;
        let done = parseInt(localStorage.getItem('done')) || 0;
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let t = null, sec = 1500, col = '#ffffff', tool = 'pen';
        let canvas, ctx, drawing = false;

        function notify(m) {
            const t = document.getElementById('toast');
            document.getElementById('msg').innerText = m;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 3000);
        }

        function save() {
            localStorage.setItem('xp', xp);
            localStorage.setItem('done', done);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            document.getElementById('xp').innerText = xp;
            document.getElementById('xps').innerText = xp;
            document.getElementById('dc').innerText = done;
            document.getElementById('bar').style.width = Math.min(done*10, 100) + '%';
        }

        function login() {
            const n = document.getElementById('u-name').value;
            if(!n) return notify("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");
            localStorage.setItem('name', n);
            document.getElementById('nb').innerText = n;
            document.getElementById('av').innerText = n[0].toUpperCase();
            document.getElementById('p-login').classList.remove('active-page');
            nav('home');
            save();
            initBoard();
        }

        function nav(p) {
            document.querySelectorAll('.page').forEach(e => e.classList.remove('active-page'));
            document.getElementById('p-' + p).classList.add('active-page');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById('n-' + p).classList.add('nav-active');
        }

        function runTimer() {
            const b = document.getElementById('t-btn');
            if(t) { clearInterval(t); t = null; b.innerText = "Ø§Ø³ØªÙ…Ø±Ø§Ø±"; }
            else {
                b.innerText = "ØªÙˆÙ‚Ù";
                t = setInterval(() => {
                    sec--;
                    let m = Math.floor(sec/60), s = sec%60;
                    document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if(sec <= 0) {
                        clearInterval(t); confetti(); xp += 500; save();
                        notify("Ø¥Ù†Ø¬Ø§Ø² Ø¹Ù…Ù„Ø§Ù‚! +500 Ù†Ù‚Ø·Ø©"); sec = 1500;
                    }
                }, 1000);
            }
        }

        function addTask() {
            const v = document.getElementById('ti').value;
            if(!v) return;
            tasks.push({id: Date.now(), text: v});
            document.getElementById('ti').value = "";
            renderTasks(); save();
        }

        function renderTasks() {
            const l = document.getElementById('tl'); l.innerHTML = "";
            tasks.forEach(t => {
                const i = document.createElement('div');
                i.className = "glass p-4 rounded-2xl flex justify-between items-center";
                i.innerHTML = `<span>${t.text}</span><button onclick="completeTask(${t.id})" class="bg-indigo-500/20 text-indigo-400 px-4 py-2 rounded-xl text-xs font-bold">ØªÙ…</button>`;
                l.prepend(i);
            });
        }

        function completeTask(id) {
            confetti({ particleCount: 100 });
            tasks = tasks.filter(t => t.id !== id);
            done++; xp += 100;
            renderTasks(); save();
            notify("Ø±Ø§Ø¦Ø¹! Ø²Ø§Ø¯Øª Ù†Ù‚Ø§Ø·Ùƒ");
        }

        function buy(c, n) {
            if(xp >= c) { xp -= c; save(); confetti(); notify(`Ù…Ø¨Ø±ÙˆÙƒ Ø´Ø±Ø§Ø¡ ${n}`); }
            else notify("Ø§Ù„Ù†Ù‚Ø§Ø· ØºÙŠØ± ÙƒØ§ÙÙŠØ©!");
        }

        function initBoard() {
            canvas = document.getElementById('board');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.clientWidth - 40;
            canvas.height = 400;
            ctx.lineCap = 'round';
            ctx.lineWidth = 3;

            canvas.onpointerdown = (e) => { drawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX, e.offsetY); };
            canvas.onpointermove = (e) => {
                if(!drawing) return;
                ctx.strokeStyle = tool === 'eraser' ? '#0f172a' : col;
                ctx.lineWidth = tool === 'eraser' ? 20 : 3;
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();
            };
            canvas.onpointerup = () => drawing = false;
        }

        function setTool(t) { tool = t; notify(t === 'pen' ? "Ø§Ù„Ù‚Ù„Ù… Ø¬Ø§Ù‡Ø²" : "Ø§Ù„Ù…Ù…Ø­Ø§Ø© Ø¬Ø§Ù‡Ø²Ø©"); }
        function clearBoard() { ctx.clearRect(0,0,canvas.width,canvas.height); notify("ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©"); }
        function saveBoard() { 
            const link = document.createElement('a');
            link.download = 'summary.png';
            link.href = canvas.toDataURL();
            link.click();
            notify("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ„Ø®ÙŠØµ ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ!");
        }

        window.onload = () => {
            if(localStorage.getItem('name')) {
                document.getElementById('u-name').value = localStorage.getItem('name');
                login();
            }
            renderTasks();
            save();
        };
    </script>
</body>
</html>
