<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Solution Makers - Ultimate Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f59e0b; --bg: #020617; --card: rgba(30, 41, 59, 0.6); }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; height: 100vh; margin: 0; }
        .glass { background: var(--card); backdrop-filter: blur(25px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .page { position: absolute; inset: 0; padding: 30px; display: none; flex-direction: column; animation: zoomIn 0.5s ease; overflow-y: auto; padding-bottom: 140px; }
        .active-page { display: flex; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .nav-btn { opacity: 0.3; transition: 0.4s; }
        .nav-active { opacity: 1; color: var(--gold); transform: scale(1.2) translateY(-5px); filter: drop-shadow(0 0 15px var(--gold)); }
        #board { background: #ffffff; border-radius: 30px; touch-action: none; width: 100%; height: 550px; cursor: crosshair; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); transition: 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55); z-index: 9999; }
        .toast.show { top: 30px; }
        /* Ø§Ù„Ø«ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        body.emerald { --bg: #062017; --gold: #10b981; }
        body.lava { --bg: #2d0a0a; --gold: #ef4444; }
        body.space { --bg: #0f172a; --gold: #8b5cf6; background-image: radial-gradient(circle at center, #1e293b 0%, #020617 100%); }
        .medal-slot { transition: 0.5s; filter: grayscale(1) opacity(0.2); }
        .medal-unlocked { filter: grayscale(0) opacity(1); transform: scale(1.1); animation: glow 2s infinite alternate; }
        @keyframes glow { from { filter: drop-shadow(0 0 5px var(--gold)); } to { filter: drop-shadow(0 0 20px var(--gold)); } }
    </style>
</head>
<body>
    <div id="toast" class="toast glass px-10 py-5 rounded-3xl border-gold shadow-[0_0_50px_rgba(245,158,11,0.3)] text-lg font-black">âœ¨ <span id="msg"></span></div>
    <div id="p-login" class="page active-page items-center justify-center">
        <div class="relative group">
            <div class="absolute -inset-1 bg-gradient-to-r from-yellow-600 to-red-600 rounded-full blur opacity-75 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"></div>
            <div class="relative w-32 h-32 bg-black rounded-full flex items-center justify-center text-5xl shadow-2xl">ğŸ‡´ğŸ‡²</div>
        </div>
        <h1 class="text-5xl font-black mt-10 mb-2 font-['Orbitron'] text-yellow-500 tracking-[10px]">SOLUTION</h1>
        <h1 class="text-3xl font-black mb-8 font-['Orbitron'] text-white opacity-80 tracking-[5px]">MAKERS ELITE</h1>
        <input id="u-name" type="text" class="w-full max-w-md bg-white/5 border-2 border-white/10 p-6 rounded-[30px] text-center outline-none focus:border-yellow-500 transition-all text-xl mb-6 shadow-inner" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø¨Ø¯Ø¹">
        <button onclick="login()" class="w-full max-w-md bg-gradient-to-r from-yellow-600 to-yellow-400 py-6 rounded-[30px] font-black text-black text-2xl shadow-2xl hover:scale-105 transition-transform active:scale-95">Ø¨Ø¯Ø¡ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ğŸš€</button>
    </div>

    <div id="p-home" class="page">
        <header class="flex justify-between items-center mb-10">
            <div class="flex items-center gap-5">
                <div id="av" class="w-16 h-16 rounded-[22px] bg-yellow-600 flex items-center justify-center font-black text-3xl text-black border-4 border-white/10 shadow-lg"></div>
                <div>
                    <p class="text-[10px] opacity-50 uppercase tracking-[4px]">Elite Member</p>
                    <p id="nb" class="font-black text-2xl text-yellow-500"></p>
                </div>
            </div>
            <div class="glass px-6 py-3 rounded-2xl text-yellow-400 font-black text-xl border-yellow-500/20 shadow-lg">â­ <span id="xp">0</span></div>
        </header>

        <div class="glass p-10 rounded-[60px] text-center mb-8 border-white/5 relative overflow-hidden group">
            <div id="timer" class="text-8xl font-['Orbitron'] font-black mb-8 tracking-tighter text-white drop-shadow-[0_10px_30px_rgba(0,0,0,0.5)]">25:00</div>
            <div class="flex justify-center gap-3 mb-8">
                <button onclick="setTime(1500, 'ØªØ±ÙƒÙŠØ²')" class="glass px-5 py-2 rounded-full text-xs font-bold hover:bg-yellow-500/20 transition">ğŸ§  ØªØ±ÙƒÙŠØ²</button>
                <button onclick="setTime(300, 'Ø§Ø³ØªØ±Ø§Ø­Ø©')" class="glass px-5 py-2 rounded-full text-xs font-bold hover:bg-green-500/20 transition">â˜• Ø§Ø³ØªØ±Ø§Ø­Ø©</button>
                <button onclick="setTime(900, 'Ø¥Ø¨Ø¯Ø§Ø¹')" class="glass px-5 py-2 rounded-full text-xs font-bold hover:bg-blue-500/20 transition">ğŸ¨ Ø¥Ø¨Ø¯Ø§Ø¹</button>
            </div>
            <button id="t-btn" onclick="runTimer()" class="w-full bg-yellow-600 text-black py-6 rounded-[30px] font-black text-xl uppercase tracking-widest shadow-[0_15px_40px_rgba(245,158,11,0.2)] active:scale-95 transition">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¢Ù†</button>
        </div>

        <div class="space-y-4">
            <h3 class="font-black text-xs opacity-40 px-4 uppercase tracking-[5px]">Ø§Ù„Ù…Ù‡Ù…Ø§Øª Ø§Ù„Ø¥Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©</h3>
            <div class="glass p-4 rounded-[35px] flex gap-3 border-white/5 shadow-inner">
                <input id="ti" type="text" class="bg-transparent flex-grow px-4 outline-none text-lg font-bold" placeholder="Ù…Ø§ Ù‡Ùˆ Ù‡Ø¯ÙÙƒ Ø§Ù„Ù‚Ø§Ø¯Ù…ØŸ">
                <button onclick="addTask()" class="bg-yellow-600 text-black w-16 h-16 rounded-3xl font-black text-3xl shadow-xl hover:rotate-90 transition-transform">+</button>
            </div>
            <div id="tl" class="space-y-4 pb-20"></div>
        </div>
    </div>
    <div id="p-board" class="page">
        <div class="flex justify-between items-center mb-6 px-2">
            <h2 class="text-3xl font-black text-yellow-500">Ù…Ù†ØµØ© Ø§Ù„ØªÙ„Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠØ© ğŸ¨</h2>
            <div class="flex gap-2">
                 <button onclick="setTool('pen')" class="glass p-4 rounded-2xl border-yellow-500/20 hover:bg-yellow-500/20 transition">ğŸ–Šï¸</button>
                 <button onclick="setTool('eraser')" class="glass p-4 rounded-2xl border-red-500/20 hover:bg-red-500/20 transition">ğŸ§¼</button>
            </div>
        </div>
        <div class="bg-white rounded-[40px] p-2 mb-6 shadow-2xl overflow-hidden border-8 border-black">
            <canvas id="board"></canvas>
        </div>
        <div class="flex flex-wrap gap-4 justify-center glass p-6 rounded-[40px]">
            <input type="color" id="color" onchange="col=this.value" class="w-14 h-14 bg-transparent border-none cursor-pointer">
            <select onchange="lineWidth=this.value" class="bg-black/50 text-sm font-bold glass px-6 rounded-2xl outline-none">
                <option value="3">Ø®Ø· Ø±ÙÙŠØ¹</option>
                <option value="8" selected>Ø®Ø· Ù…ØªÙˆØ³Ø·</option>
                <option value="20">Ø®Ø· Ø¹Ø±ÙŠØ¶</option>
            </select>
            <button onclick="clearBoard()" class="px-8 py-4 rounded-2xl font-black text-red-500 hover:bg-red-500/10 transition">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
            <button onclick="saveBoard()" class="bg-yellow-600 text-black px-10 py-4 rounded-2xl font-black shadow-xl">Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ ÙƒØµÙˆØ±Ø© ğŸ“¥</button>
        </div>
    </div>

    <div id="p-shop" class="page">
        <h2 class="text-3xl font-black mb-10 text-yellow-500 text-center uppercase tracking-[5px]">Ø³ÙˆÙ‚ Ø§Ù„Ù†Ø®Ø¨Ø© ğŸ’</h2>
        
        <div class="grid grid-cols-3 gap-4 mb-12">
            <div id="m1" class="medal-slot glass p-6 rounded-3xl flex flex-col items-center gap-2">
                <span class="text-4xl">ğŸ¥‰</span><p class="text-[8px] font-black">Ù…Ø¨Ø¯Ø¹ Ù†Ø§Ø´Ø¦</p>
            </div>
            <div id="m2" class="medal-slot glass p-6 rounded-3xl flex flex-col items-center gap-2">
                <span class="text-4xl">ğŸ¥ˆ</span><p class="text-[8px] font-black">Ù‚Ø§Ø¦Ø¯ ÙØ°</p>
            </div>
            <div id="m3" class="medal-slot glass p-6 rounded-3xl flex flex-col items-center gap-2">
                <span class="text-4xl">ğŸ¥‡</span><p class="text-[8px] font-black">Ø£Ø³Ø·ÙˆØ±Ø© Ø¹ÙÙ…Ø§Ù†</p>
            </div>
        </div>

        <div class="space-y-6">
            <div class="glass p-8 rounded-[45px] flex justify-between items-center border-emerald-500/20 shadow-lg">
                <div><p class="text-xl font-black text-emerald-400">Ø«ÙŠÙ… Ø§Ù„Ø²Ù…Ø±Ø¯ ğŸ’š</p><p class="text-xs opacity-50">ØªØºÙŠÙŠØ± Ù‡ÙˆÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ - 1000 XP</p></div>
                <button onclick="buy(1000,'emerald')" class="bg-emerald-600 px-8 py-3 rounded-2xl font-black shadow-lg">Ø´Ø±Ø§Ø¡</button>
            </div>
            <div class="glass p-8 rounded-[45px] flex justify-between items-center border-red-500/20 shadow-lg">
                <div><p class="text-xl font-black text-red-500">Ø«ÙŠÙ… Ø§Ù„Ø­Ù…Ù… ğŸŒ‹</p><p class="text-xs opacity-50">ØªØºÙŠÙŠØ± Ù‡ÙˆÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ - 2000 XP</p></div>
                <button onclick="buy(2000,'lava')" class="bg-red-600 px-8 py-3 rounded-2xl font-black shadow-lg">Ø´Ø±Ø§Ø¡</button>
            </div>
            <div class="glass p-8 rounded-[45px] flex justify-between items-center border-purple-500/20 shadow-lg">
                <div><p class="text-xl font-black text-purple-400">Ø«ÙŠÙ… Ø§Ù„ÙØ¶Ø§Ø¡ ğŸŒŒ</p><p class="text-xs opacity-50">ØªØºÙŠÙŠØ± Ù‡ÙˆÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ - 5000 XP</p></div>
                <button onclick="buy(5000,'space')" class="bg-purple-600 px-8 py-3 rounded-2xl font-black shadow-lg">Ø´Ø±Ø§Ø¡</button>
            </div>
        </div>
    </div>

    <nav class="fixed bottom-8 left-1/2 -translate-x-1/2 w-[90%] h-24 glass rounded-[50px] flex justify-around items-center px-6 z-50 border-white/10 shadow-2xl">
        <button onclick="nav('home')" id="n-home" class="nav-btn nav-active text-4xl">ğŸ </button>
        <button onclick="nav('board')" id="n-board" class="nav-btn text-4xl">ğŸ¨</button>
        <button onclick="nav('shop')" id="n-shop" class="nav-btn text-4xl">ğŸ†</button>
    </nav>
    <script>
        let xp = parseInt(localStorage.getItem('xp')) || 0;
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let t = null, sec = 1500, col = '#000000', tool = 'pen', drawing = false, lineWidth = 8;
        let canvas, ctx;

        function notify(m) {
            const toast = document.getElementById('toast');
            document.getElementById('msg').innerText = m;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function save() {
            localStorage.setItem('xp', xp);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            document.getElementById('xp').innerText = xp;
            
            // Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙŠØ¯Ø§Ù„ÙŠØ§Øª Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
            if(xp >= 500) document.getElementById('m1').classList.add('medal-unlocked');
            if(xp >= 2500) document.getElementById('m2').classList.add('medal-unlocked');
            if(xp >= 10000) document.getElementById('m3').classList.add('medal-unlocked');
        }

        function setTime(s, type) { 
            if(t) { clearInterval(t); t = null; document.getElementById('t-btn').innerText = "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬Ù„Ø³Ø©"; }
            sec = s; 
            document.getElementById('timer').innerText = Math.floor(sec/60)+":00"; 
            notify(`ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù€ ${type}!`); 
        }

        function login() {
            const n = document.getElementById('u-name').value;
            if(!n) return notify("Ø§Ù„Ù‚Ø§Ø¯Ø© Ù„Ø§ ÙŠØ¯Ø®Ù„ÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø£Ø³Ù…Ø§Ø¡!");
            localStorage.setItem('name', n);
            document.getElementById('nb').innerText = n;
            document.getElementById('av').innerText = n[0].toUpperCase();
            document.getElementById('p-login').classList.remove('active-page');
            nav('home'); save();
        }

        function nav(p) {
            document.querySelectorAll('.page').forEach(e => e.classList.remove('active-page'));
            document.getElementById('p-' + p).classList.add('active-page');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            document.getElementById('n-' + p).classList.add('nav-active');
            if(p === 'board') setTimeout(initBoard, 200);
        }

        function initBoard() {
            canvas = document.getElementById('board');
            ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 550;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            const getPos = (e) => {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: (e.clientX || e.touches[0].clientX) - rect.left,
                    y: (e.clientY || e.touches[0].clientY) - rect.top
                };
            };

            const start = (e) => { drawing = true; ctx.beginPath(); const pos = getPos(e); ctx.moveTo(pos.x, pos.y); };
            const move = (e) => {
                if(!drawing) return;
                e.preventDefault();
                const pos = getPos(e);
                ctx.strokeStyle = tool === 'eraser' ? '#ffffff' : col;
                ctx.lineWidth = tool === 'eraser' ? 40 : lineWidth;
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
            };
            const stop = () => { drawing = false; };

            canvas.onmousedown = start; canvas.onmousemove = move; window.onmouseup = stop;
            canvas.ontouchstart = start; canvas.ontouchmove = move; canvas.ontouchend = stop;
        }

        function runTimer() {
            const b = document.getElementById('t-btn');
            if(t) { clearInterval(t); t = null; b.innerText = "Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø¬Ù„Ø³Ø©"; }
            else {
                b.innerText = "ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª";
                t = setInterval(() => {
                    sec--;
                    let m = Math.floor(sec/60), s = sec%60;
                    document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                    if(sec <= 0) {
                        clearInterval(t); confetti({particleCount: 300, spread: 100}); 
                        xp += 1000; save();
                        notify("Ø¥Ù†Ø¬Ø§Ø² Ø¹Ø¸ÙŠÙ…! +1000 XP"); sec = 1500; b.innerText = "Ø§Ø¨Ø¯Ø£";
                    }
                }, 1000);
            }
        }

        function addTask() {
            const v = document.getElementById('ti').value; if(!v) return;
            tasks.push({id: Date.now(), text: v});
            document.getElementById('ti').value = ""; renderTasks(); save();
        }

        function renderTasks() {
            const l = document.getElementById('tl'); l.innerHTML = "";
            tasks.forEach(t => {
                const i = document.createElement('div');
                i.className = "glass p-6 rounded-[30px] flex justify-between items-center animate-bounce border-white/5";
                i.innerHTML = `<span class="text-lg font-bold">${t.text}</span><button onclick="completeTask(${t.id})" class="bg-yellow-600 text-black px-8 py-3 rounded-2xl font-black">Ø¥Ù†Ø¬Ø§Ø²</button>`;
                l.prepend(i);
            });
        }

        function completeTask(id) {
            confetti({ particleCount: 150, spread: 70 });
            tasks = tasks.filter(t => t.id !== id);
            xp += 200; renderTasks(); save(); notify("Ù‡Ø¯Ù Ù…Ø­Ù‚Ù‚! +200 XP");
        }

        function buy(c, theme) {
            if(xp >= c) {
                xp -= c; save(); confetti();
                document.body.className = theme;
                notify(`ØªÙ… ØªÙØ¹ÙŠÙ„ Ø«ÙŠÙ… ${theme} Ø¨Ù†Ø¬Ø§Ø­!`);
            } else notify("Ù†Ù‚Ø§Ø·Ùƒ Ù„Ø§ ØªÙƒÙÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ø±Ù!");
        }

        function setTool(t) { tool = t; }
        function clearBoard() { ctx.clearRect(0,0,canvas.width,canvas.height); notify("ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ù†ØµØ©!"); }
        function saveBoard() {
            const link = document.createElement('a');
            link.download = 'Elite-Summary.png';
            link.href = canvas.toDataURL();
            link.click();
            notify("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ!");
        }

        window.onload = () => {
            if(localStorage.getItem('name')) {
                document.getElementById('u-name').value = localStorage.getItem('name');
                login();
            }
            renderTasks(); save();
        };
    </script>
</body>
</html>
